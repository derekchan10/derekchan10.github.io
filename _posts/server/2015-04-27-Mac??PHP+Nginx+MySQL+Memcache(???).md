---
layout: post
title: Mac??PHP+Nginx+MySQL+Memcache(???)
category: ???
tags: Mac,Nginx,Memcache,php,Mysql
keywords: Mac,Nginx,Memcache,php,Mysql
description: 
---

????????PHP?????????????????????????????????????????????????????????????????????????????????????????????????????

###1???<span style="color: #2980b9;">Brew</span>

?????Mac??Brew?Brew???HomeBrew???Mac???????Ubuntu?apt-get?CentOs?Yum???????????????Brew??????????????????????????????????

        ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"


**Brew?????**

        brew install xxx ????
        
        brew uninstall xxx ????
        
        brew list ?????????
        
        brew update xxx ??????


??Root???????????sudo??sudo brew install xxx??

###2???<span style="color: #2980b9;">Nginx</span>

????

        brew install nginx


??????????????????sudo?

???????Nginx

**??Nginx**

        vi /usr/local/etc/nginx/nginx.conf


?http{ ... }??????????

        include /usr/local/etc/nginx/conf.d/*.conf;


?????????????????????????????????????????????

        include conf.d/*.conf;


??????????

        mkdir /usr/local/etc/nginx/conf.d
        
        vi /usr/local/etc/nginx/conf.d/default.conf


????????

        server {
            listen       80;
            server_name  localhost;
        
            root /Users/username/Sites/; # ??????????????????
        
            location / { 
                index index.php;
                autoindex on; 
            }   
        
            #proxy the php scripts to php-fpm  
            location ~ \.php$ {
                include /usr/local/etc/nginx/fastcgi.conf;
                fastcgi_intercept_errors on; 
                fastcgi_pass   127.0.0.1:9000; 
            }   
        }


?????????php??????????php-fpm?

??mac 10.9???php-fpm?????????????PHP?PHP???php-fpm?????PHP??php-fpm??????????

???nginx??????????php-fpm????nginx

        nginx ???nginx?
        
        nginx -s reload ???nginx?
        
        nginx -s stop ???nginx?
        
        nginx -t ???nginx??????????


????????????nginx???nginx?????/usr/local/bin????Brew????????/usr/local/Cellar?????

        cp /usr/local/Cellar/nginx/1.6.2/bin/nginx /usr/local/bin/


?????????nginx???

###3???<span style="color: #3498db;">PHP</span>

        brew update
        brew tap homebrew/dupes 
        brew tap homebrew/versions 
        brew tap homebrew/php
        brew install php54 --with-fpm


????php5.4?????????????????????????????PHP?????????php-fpm???/usr/local/bin???

        cp /usr/local/sbin/php-fpm /usr/local/bin/


???????php-fpm

        php-fpm -D ?-D????????????
        nginx ?????nginx?


###4???<span style="color: #3498db;">MySQL</span>

        brew install mysql
        unset TMPDIR
        mysql_install_db --verbose --user=`whoami` --basedir="$(brew --prefix mysql)" --datadir=/usr/local/var/mysql --tmpdir=/tmp
        sudo chown -R your_user /usr/local/var/mysql


???????mysql

        mysql.server start


???mysql????

        mysqladmin -u root password '***'


?????mysql?????`/usr/local/etc`?????`my.cnf`?????log

        [mysqld]
        general-log
        general_log_file = /usr/local/var/log/mysqld.log


###5???<span style="color: #3498db;">Memcache</span>

???????????????????????

???memcached??

        brew install memcached


????memcached

        memcached -d -m 2048 -p 11211


???-d???php-fpm???????????-m???????????2G???-p???

????php?memcache?????php???????memcache?????????????

        brew install php54-memcache


?????????/usr/local/Cellar????????????memcache.so??php???????????????php-fpm????

        cp /usr/local/Cellar/php54-memcache/2.2.7/memcache.so /usr/local/etc/php/5.4/ext/


???`php.ini?/usr/local/etc/php/5.4/php.ini?`??

        extension=memcache.so


???php-fpm????memcache

        killall php-fpm
        php-fpm -D


###??

????????????????????????

